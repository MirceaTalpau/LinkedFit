<div class="register-container">
    <form [formGroup]="registerForm" class="register-form">
        <div class="title">
            <h1>Register</h1>
        </div>
        <div class="name">     
            <div class="fname">
                <span class="p-float-label p-input-icon-left" >
                    <i class="material-icons">person</i>
                    <input class="first-name-input" [class.invalid]="firstName?.invalid && firstName?.touched" maxlength="255" pInputText type="text" pInputText id="first-name" formControlName="firstName" />
                    <label>First Name</label>
                </span>
                <mat-error class="error-container-register" [ngClass]="{ 'hidden': !firstName?.invalid || !firstName?.touched }">
                    <div *ngFor="let error of errorMessages.firstName">
                        <span class="error-message" *ngIf="firstName?.hasError(error.type)">{{ error.message }}</span>
                    </div>
                </mat-error>
            </div>
            <div class="lname">
                <span class="p-float-label p-input-icon-left">
                    <i class="material-icons">person</i>
                    <input class="last-name-input" [class.invalid]="lastName?.invalid && lastName?.touched" maxlength="255" pInputText type="text" pInputText id="last-name" formControlName="lastName" />
                    <label>Last Name</label>
                </span>
                <mat-error class="error-container-register" [ngClass]="{ 'hidden': !lastName?.invalid || !lastName?.touched }">
                    <div *ngFor="let error of errorMessages.lastName">
                        <span class="error-message" *ngIf="lastName?.hasError(error.type)">{{ error.message }}</span>
                    </div>
                </mat-error>
            </div>
        </div>
        <div class="credentials">
            <div class="email">
                <span class="p-float-label p-input-icon-left">
                    <i class="material-icons">mail</i>
                    <input [class.invalid]="email?.invalid && email?.touched" maxlength="255" type="email" pInputText id="email" formControlName="email" class="email-form"/>
                    <label>Email</label>
                </span>
                <mat-error class="error-container-register" [ngClass]="{ 'hidden': !email?.invalid || !email?.touched }">
                    <div *ngFor="let error of errorMessages.email">
                        <span class="error-message" *ngIf="email?.hasError(error.type)">{{ error.message }}</span>
                    </div>
                </mat-error>
            </div>
            <div class="password">
                <span class="p-float-label p-input-icon-left">
                    <i class="material-icons">lock</i>
                    <input [class.invalid]="password?.invalid && password?.touched" maxlength="255" type="password" pInputText id="password" formControlName="password" />
                    <label>Password</label>
                </span>
                <mat-error class="error-container-register" [ngClass]="{ 'hidden': !password?.invalid || !password?.touched }">
                    <div *ngFor="let error of errorMessages.password">
                        <span class="error-message" *ngIf="password?.hasError(error.type)">{{ error.message }}</span>
                    </div>
                </mat-error>
            </div>
            <div class="confirm-password">
                <span class="p-float-label p-input-icon-left">
                    <i class="material-icons">lock</i>
                    <input [class.invalid]="confirmPassword?.invalid && confirmPassword?.touched" maxlength="255" type="password" pInputText id="confirm-password" formControlName="confirmPassword" />
                    <label>Confirm Password</label>
                </span>
                <mat-error class="error-container-register" [ngClass]="{ 'hidden': !confirmPassword?.invalid || !confirmPassword?.touched }">
                    <div *ngFor="let error of errorMessages.confirmPassword">
                        <span class="error-message" *ngIf="confirmPassword?.hasError(error.type)">{{ error.message }}</span>
                    </div>
                </mat-error>
            </div>
            <div class="birthday">
                <span [ngClass]="{ 'invalid': !birthday?.invalid && !birthday?.touched }" class="p-float-label" style="border-radius: 15px; width: 100%;">
                    <p-calendar [style]="{'width':'100%'}" class="birthday-form" [class.invalid]="birthday?.invalid && birthday?.touched || birthday?.dirty" formControlName="birthday" id="birthday" icon="pi pi-calendar"  [showButtonBar]='true'></p-calendar>
                    <label>Birthday</label>
                </span>
                <mat-error class="error-container-register" [ngClass]="{ 'hidden': !birthday?.invalid || !birthday?.touched }">
                    <div *ngFor="let error of errorMessages.birthday">
                        <span class="error-message" *ngIf="birthday?.hasError(error.type)">{{ error.message }}</span>
                    </div>
                </mat-error>
            </div>
        </div>
        <div class="gender">
            <div class="flex align-items-center">
                <p-radioButton name="gender" value="M" formControlName="gender" inputId="gender1"></p-radioButton>
                <label class="ml-2">Male</label>
            </div>
            
            <div class="flex align-items-center">
                <p-radioButton name="gender" value="F" formControlName="gender" inputId="gender2"></p-radioButton>
                <label class="ml-2">Female</label>
            </div>
        </div>
        <div class="error">
            <div *ngIf="error">There was an error creating your account!</div>
        </div>
        <div class="flex justify-content-center">
            <button pButton label="Back" (click)="redirect()" class="back"></button>
            <button pButton label="Register" [disabled]="!this.registerForm.valid" (click)="onSubmit()" class="submit"></button>
        </div>
        <p-dialog header="Success!" [(visible)]="modalVisible" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false" [closable]="false">
            <div class="modal-container">
                <p class="m-0" style="width: 100%;">
                    You have successfully registered! You received an email to confirm your account. Please check your email.
                </p>
                <button pButton label="OK" (click)="redirect()" class="m-button"></button>
            </div>
        </p-dialog>
    </form>
    
</div>
